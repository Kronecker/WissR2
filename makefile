numProc=4

all: B2A1 B2A2

clean:
	rm *.out
B2A1: B2A1.c
	mpicc B2A1.c -o B2A1.out

B2A1run: B2A1
	mpirun -n $(numProc) B2A1.out
B2A2: B2A2_SNDRCV B2A2_MPIREDUCE B2A2_SNDRCVTREE_2NODESTREE B2A2_SNDRCVTREE_16NODESTREE
	@:
B2A2_SNDRCV: B2A2.c
	mpicc B2A2.c -oB2A2_SNDRCV.out

B2A2_MPIREDUCE: B2A2.c
	mpicc B2A2.c -oB2A2_REDUCE.out -DUSE_MPI_REDUCE

B2A2_SNDRCVTREE_2NODESTREE: B2A2.c
	mpicc B2A2.c -oB2A2_SNDRCV_Tree2Nodes.out -DSND_RCV_WITH_TREE -DSND_RCV_TREE_NODES=2

B2A2_SNDRCVTREE_16NODESTREE: B2A2.c
	mpicc B2A2.c -oB2A2_SNDRCV_Tree16Nodes.out -DSND_RCV_WITH_TREE -DSND_RCV_TREE_NODES=16

runall: